(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{983:function(e,t,r){"use strict";r.r(t);r(88),r(70),r(47),r(66),r(231);var n,c=r(5),o=(r(205),r(117),r(118),r(175),r(138),r(44),r(144),r(174),r(984),r(97),r(52),r(1)),m=r(230),d=r.n(m),l=r(661),f=r(650),h=r.n(f),w=r(655),O=r.n(w),j=r(2),k=r(56),v=r(0),x=r(135),N=r(42);function E(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function P(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?E(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):E(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var _,y,A,S,T,I,R,C,F,L,G,B,D,W,M,U,H,V,K,J,Q,Y,z,Z,X,$=r(153),ee=r(354),te=function(e){var t=e.newAccount;(0,e.commit)("IDENTIFY",Object(j.toChecksumAddress)(t[0])),window.location.reload()},re={netId:function(e){return e.netId},isApiValible:function(e){return 1==e.netId},networkName:function(e){return k.a["netId".concat(e.netId)].networkName},currency:function(e){return k.a["netId".concat(e.netId)]?k.a["netId".concat(e.netId)].currencyName:"ETH"},disableBurnerFeature:function(e){if(k.a["netId".concat(e.netId)]){var t=k.a["netId".concat(e.netId)].disableBurnerFeature;return null!=t&&null!=t&&t}return!1},skipAdvancedChecking:function(e){if(k.a["netId".concat(e.netId)]){var t=k.a["netId".concat(e.netId)].skipAdvancedChecking;return null!=t&&null!=t&&t}return!1},networkConfig:function(e){return k.a["netId".concat(e.netId)]},getEthereumProvider:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,c,o,m,d,f,w,j,v,x;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.providerName,e.networkName,n=e.prepareNetId,c=e.walletName,t.t0=r,t.next="fortmatic"===t.t0?4:"naboxWallet"===t.t0?7:"BitKeep"===t.t0?8:"kaikas"===t.t0?9:"okexWallet"===t.t0?10:"walletConnect"===t.t0?11:"walletLink"===t.t0?21:("mewConnect"===t.t0||t.t0,33);break;case 4:return o=new O.a("pk_live_16BBFE98905B1AA1"),t.abrupt("return",o.getProvider());case 7:return t.abrupt("return",window.NaboxWallet);case 8:return t.abrupt("return",window.bitkeep&&window.bitkeep.ethereum);case 9:return t.abrupt("return",window.klaytn);case 10:return t.abrupt("return",window.okexchain);case 11:if(!window.walletProviderForBulksender){t.next=13;break}return t.abrupt("return",window.walletProviderForBulksender);case 13:for(d in m={},k.a)f=parseInt(d.replace("netId","")),m[f]=1==f?"https://mainnet.infura.io/v3/bcf5eb7bbef849ad9656d4d78b1f4f65":k.a[d].rpcUrl;return w={rpc:m,bridge:"https://bridge.walletconnect.org",qrcode:!0,pollingInterval:15e3},"imToken"!=c&&(w.chainId=n),j=new l.a(w),window.walletProviderForBulksender=j,t.abrupt("return",j);case 21:if(!window.walletLinkForBulksender){t.next=25;break}return t.abrupt("return",window.walletLinkForBulksender);case 25:return"Token Bulksender","https://assets.dapp.review/dapp-logo/2020.02.21/AnCYWMmWd4xPSeT4tpCBxHcyixyQj5tW.png",1,v=new h.a({appName:"Token Bulksender",appLogoUrl:"https://assets.dapp.review/dapp-logo/2020.02.21/AnCYWMmWd4xPSeT4tpCBxHcyixyQj5tW.png",darkMode:!1}),x=v.makeWeb3Provider("https://mainnet-eth.compound.finance",1),window.walletLinkForBulksender=x,t.abrupt("return",x);case 32:return t.abrupt("break",34);case 33:return t.abrupt("return",window.ethereum);case 34:case"end":return t.stop()}}),t)})))},customRPCProvider:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.networkConfig.rpcUrl,n=new d.a.providers.HttpProvider(r),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})))},web3:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getEthereumProvider();case 2:return r=e.sent,e.abrupt("return",Object.freeze(new d.a(r)));case 4:case"end":return e.stop()}}),e)})))},customRPCWeb3:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.networkConfig.rpcUrl,n=new d.a.providers.HttpProvider(r),e.abrupt("return",Object.freeze(new d.a(n)));case 3:case"end":return e.stop()}}),e)})))}},ae={IDENTIFY:function(e,t){e.ethAccount=t},SET_NET_ID:function(e,t){t=parseInt(t,10),e.netId=t},SET_PREPARE_NET_ID:function(e,t){e.prepareNetId=t},SET_BALANCE:function(e,t){e.balance=Object(j.fromWei)(t)},SET_WALLET_STATE:function(e,t){e.walletState=t},SET_ADDRESS:function(e,t){var address=t.address,r=t.valid,n=void 0!==r&&r;e.address={value:address,valid:n}},SAVE_GAS_PRICE:function(e,t){e.gasPrice=t,e.gasPriceInfoLoaded=!0},SAVE_DEFAULT_GAS_PRICE:function(e,t){e.gasPrice=t},SAVE_GAS_PRICE_INFO_LOADED:function(e,t){e.gasPriceInfoLoaded=t},SAVE_GAS_PRICE_LOADING:function(e,t){e.gasPriceLoading=t},SET_GAS_PRICE_ORACLE_LOCKED:function(e,t){e.gasPriceOracleLocked=t},SAVE_TOKENS:function(e,t){e.tokens=t},SET_TOKEN_ADDRESS:function(e,t){e.tokenAddress=t},SET_FETCHING:function(e,t){e.isFetching=t},SET_PROVIDER_NAME:function(e,t){e.providerName=t},SET_NETWORK_NAME:function(e,t){e.networkName=t},SET_INITIALIZED:function(e,t){e.initialized=t},SET_IS_IMTOKEN:function(e,t){e.isImToken=t},SET_IS_TRUSTWALLET:function(e,t){e.isTrustWallet=t},SET_IS_SIGN_AND_SEND:function(e,t){e.signAndSend=t},SET_WALLET_NAME:function(e,t){e.walletName=t},SAVE_ETH_PRICE:function(e,t){e.ethPrice=t},SET_ETH_PRICE_LOADED:function(e,t){e.ethPriceLoaded=t},SET_QR_MODAL_CLOSED:function(e,t){e.qrModalClosed=t},SET_NETWORK_BASEFEE:function(e,t){e.networkBaseFee=t},SET_SUPPORT_EIP1559:function(e,t){e.supportEIP1559=t}},ne=(n={setAddress:function(e,t){e.dispatch;var r=e.commit,address=t.address;r("SET_ADDRESS",{address:address,valid:address.length>=42&&Object(N.a)(address)})},setTokenAddress:function(e,t){e.dispatch;(0,e.commit)("SET_TOKEN_ADDRESS",t.address)},setWalletName:function(e,t){var r=e.dispatch,n=e.commit,c=t.walletName;n("SET_WALLET_NAME",c),r("common/saveLastUsedWalletName",{walletName:c},{root:!0})},onNetworkChanged:function(e,t){(0,e.commit)("SET_NET_ID",t.netId)},onChainIdChanged:function(e,t){var r=e.commit,n=t.chainId;r("SET_NET_ID",Object(j.hexToNumber)(n))},closeProvider:(X=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.dispatch,t.state,t.getters,n=t.commit,c=r.providerName,e.t0=c,e.next="walletConnect"===e.t0?5:"walletLink"===e.t0?9:"mewConnect"===e.t0?13:17;break;case 5:if(!window.walletProviderForBulksender){e.next=9;break}return e.next=8,window.walletProviderForBulksender.disconnect();case 8:window.walletProviderForBulksender=void 0;case 9:if(!window.walletLinkForBulksender){e.next=13;break}return e.next=12,window.walletLinkForBulksender.close();case 12:window.walletLinkForBulksender=void 0;case 13:if(!window.connectMewForBulksender){e.next=17;break}return e.next=16,window.connectMewForBulksender.disconnect();case 16:window.connectMewForBulksender=void 0;case 17:return e.abrupt("break",18);case 18:return n("IDENTIFY",null),n("SET_PROVIDER_NAME",""),n("SET_WALLET_NAME",""),n("SET_PREPARE_NET_ID",1),e.abrupt("return",!0);case 23:case"end":return e.stop()}}),e)}))),function(e,t){return X.apply(this,arguments)}),switchNetwork:(Z=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,c,o,m,d,l,f,h,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.state,n=t.getters,t.commit,c=r.networkId,o=Object(j.toHex)(c),e.prev=3,e.next=6,ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:o}]});case 6:e.next=33;break;case 8:return e.prev=8,e.t0=e.catch(3),m=k.a["netId".concat(c)],e.next=13,n.getEthereumProvider();case 13:d=e.sent,l={chainId:o,chainName:m.networkName,nativeCurrency:{name:m.currencyName,symbol:m.currencyName,decimals:18},rpcUrls:[m.rpcUrl],blockExplorerUrls:[m.explorerUrl.tx.replace("tx","")]},f=!1;try{f=e.t0.message.includes("networkConfigurationId undefined does not match")}catch(e){}if(4902!==e.t0.code&&!f){e.next=33;break}return e.prev=18,e.next=21,d.request({method:"wallet_addEthereumChain",params:[l]});case 21:e.next=33;break;case 23:e.prev=23,e.t1=e.catch(18),h=!1;try{h=e.t0.message.includes("networkConfigurationId undefined does not match")}catch(e){}if(!e.t1.message.includes("Request for method 'eth_chainId")&&!h){e.next=33;break}return(w=m.rpcUrlBackup)||(w=m.rpcUrl),l.rpcUrls=[w],e.next=33,d.request({method:"wallet_addEthereumChain",params:[l]});case 33:case"end":return e.stop()}}),e,null,[[3,8],[18,23]])}))),function(e,t){return Z.apply(this,arguments)}),getBalance:function(e){var t=e.dispatch,r=e.state,n=e.getters.networkConfig.rpcCallRetryAttempt;return new Promise((function(e,c){var m=function(){var d=Object(o.a)(regeneratorRuntime.mark((function o(d){var l,f,h,w;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return l=d.retryAttempt,f=void 0===l?1:l,f++,o.prev=2,h={method:"eth_getBalance",params:[r.ethAccount,"latest"]},o.next=6,t("metamask/sendAsync",h,{root:!0});case 6:w=o.sent,e(w),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(2),f>=n?c(o.t0):m({retryAttempt:f});case 13:case"end":return o.stop()}}),o,null,[[2,10]])})));return function(e){return d.apply(this,arguments)}}();m({})}))},getAllSupportedNetworks:function(e){e.dispatch,e.commit;return k.a},askPermission:function(e,t){var r=e.commit,n=e.dispatch,c=e.getters,m=e.rootGetters,d=(e.state,t.providerName),l=t.networkName,f=t.prepareNetId,h=t.walletName;return new Promise(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,o){var w,O,k,v,x,N,E,P,_,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r("SET_PROVIDER_NAME",d),r("SET_NETWORK_NAME",l),r("SET_PREPARE_NET_ID",f),r("SET_WALLET_NAME",h),r("SET_INITIALIZED",!1),e.next=7,c.getEthereumProvider();case 7:return w=e.sent,e.prev=8,null==w&&(r("SET_WALLET_STATE",-1),o(new Error("Please Install Metamask"))),w.wc&&(r("SET_QR_MODAL_CLOSED",!1),w.wc.on("display_uri",(function(e,t){})),w.wc.on("modal_closed",(function(e,t){r("SET_QR_MODAL_CLOSED",!0)}))),O=[],e.prev=12,e.next=15,w.enable();case 15:O=e.sent,e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(12),e.next=22,w.request({method:"eth_requestAccounts"});case 22:O=e.sent;case 23:0===O.length&&(r("SET_WALLET_STATE",-2),o(new Error("lockedMetamask")));try{w&&w.walletMeta&&w.walletMeta.name&&w.walletMeta.name.toLowerCase().includes("exodus")&&r("SET_IS_SIGN_AND_SEND",!0)}catch(e){}return r("SET_WALLET_STATE",1),k=Object(j.toChecksumAddress)(O[0]),r("IDENTIFY",k),n("setAddress",{address:k}),e.next=31,n("getBalance");case 31:return v=e.sent,v=Object(j.hexToNumberString)(v),n("saveUserBalance",{balance:v}),e.next=36,n("sendAsync",{method:"eth_chainId",params:[]});case 36:x=e.sent,N=Object(j.hexToNumber)(x),n("onNetworkChanged",{netId:N});try{(window.imToken||window.ethereum.isImToken)&&r("SET_IS_IMTOKEN",!0),null!=window.trustProvider&&r("SET_IS_TRUSTWALLET",!0),w.on&&(w.on("accountsChanged",(function(e){return te({dispatch:n,commit:r,newAccount:e})})),w.on("chainChanged",(function(e){return window.location.reload()})),w.on("networkChanged",(function(e){return n("onNetworkChanged",{netId:e})})))}catch(e){console.info(e)}E=m["metamask/networkConfig"].supportEIP1559,r("SET_SUPPORT_EIP1559",E);try{P=m["metamask/networkConfig"],_=P.baseFee,(y=P.gasPrice)&&r("SAVE_DEFAULT_GAS_PRICE",y),_&&r("SET_NETWORK_BASEFEE",_)}catch(e){}return r("SET_INITIALIZED",!0),e.next=46,n("common/saveLastUsedProviderName",{providerName:d},{root:!0});case 46:n("fetchTokenList",{}),n("bulksender/initBaseParams",{},{root:!0}),n("common/initBaseParams",{},{root:!0}),n("token/initBaseParams",{},{root:!0});try{n("fetchCoinPrice")}catch(e){}t({netId:N,ethAccount:O[0]}),e.next=57;break;case 54:e.prev=54,e.t1=e.catch(8),o(e.t1);case 57:case"end":return e.stop()}}),e,null,[[8,54],[12,18]])})));return function(t,r){return e.apply(this,arguments)}}())},saveUserBalance:function(e,t){(0,e.commit)("SET_BALANCE",t.balance)},fetchETHBalance:(z=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,t.commit,e.prev=1,e.next=4,r("getBalance");case 4:n=e.sent,n=Object(j.hexToNumberString)(n),r("saveUserBalance",{balance:n}),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])}))),function(e){return z.apply(this,arguments)}),fetchTokenList:(Y=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,c,o,m,d,l,f,h,w,O,j,k,N,E,P,_,y,A,S,T,I,R,C,F,L,G,B,D,W,M,U,H,V,K,J,Q;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.rootState,c=t.commit,o=t.dispatch,m=t.rootGetters,t.state,d=r.oracleIndex,l=void 0===d?0:d,(f=m["metamask/networkConfig"]).smartContractPollTime,f.gasPrice,h=f.tokenOracleUrls,w=f.currencyName,O=f.networkName,j=f.specialTokenList,k=f.supportTokensAPI,N=n.metamask,E=N.netId,N.isFetching,P=N.ethAccount,N.tokens,_=N.balance,y=N.ethCoinName,A=n.common.language,!k){e.next=55;break}if(e.prev=6,l!=h.length){e.next=12;break}return e.next=10,o("setDefaultTokenList");case 10:e.next=47;break;case 12:return S=1==E,T=h[l%h.length],I=T.indexOf("api.covalenthq")>-1,R=T.indexOf("api/?module=account&action=tokenlist")>-1||T.indexOf("api?module=account&action=tokenlist")>-1,C=T.indexOf("oklink")>-1,F=T.indexOf("debank")>-1,L=T.indexOf("moralis.io")>-1,G={},L&&(B=T.split("&apiKey="),D={"X-API-Key":B[1],accept:"application/json"},G={method:"GET",headers:D},T=B[0]),T=T.replace("{chain_id}",E).replace("{address}",P).replace("{timestamp}",(new Date).getTime()),e.next=24,Object(x.a)(T,G);case 24:if(200!==(W=e.sent).status){e.next=46;break}return e.next=28,W.json();case 28:if(!(1==(M=e.sent).status||0==M.error||M.success||0==M.status||0==M.code||null!=M.context&&200==M.context.code||M.hasOwnProperty("tokens")||(F||L)&&Array.isArray(M)||F&&0==M.error_code)){e.next=43;break}U=[],H=["0x0000000000000000000000000000000000000000"].concat(j),V=O+y,"CN"==A&&S&&(V="以太币"),U.push({symbol:w,name:V,balance:Object(v.a)(_).times(Object(v.a)(10).pow(18)).toString(10),displayBalance:_,contractAddress:"0x0000000000000000000000000000000000000000",decimals:"18",isETH:!0}),I?(K=M.data.items,J=0,K.forEach((function(e){if(J>0){var t={name:e.contract_name,symbol:e.contract_ticker_symbol,decimals:e.contract_decimals,balance:e.balance,displayBalance:Object(v.a)(e.balance).div(Object(v.a)(10).pow(parseInt(e.contract_decimals))).toString(10),contractAddress:e.contract_address};U.push(t),j.includes(t.contractAddress.toLowerCase())||H.push(t.contractAddress.toLowerCase())}J+=1}))):R?(K=M.result).forEach((function(e){var t={name:e.name,symbol:e.symbol,decimals:e.decimals,balance:e.balance,displayBalance:Object(v.a)(e.balance).div(Object(v.a)(10).pow(parseInt(e.decimals))).toString(10),contractAddress:e.contractAddress};U.push(t),j.includes(t.contractAddress.toLowerCase())||H.push(t.contractAddress.toLowerCase())})):C?(K=M.data.hits).forEach((function(e){var t={name:e.coinName,symbol:e.symbol,decimals:e.precision,balance:0,displayBalance:Object(v.a)(0).div(Object(v.a)(10).pow(parseInt(e.precision))).toString(10),contractAddress:e.tokenContractAddress};U.push(t),j.includes(t.contractAddress.toLowerCase())||H.push(t.contractAddress.toLowerCase())})):F?(K=M.data).forEach((function(e){if(e.id&&e.id.startsWith("0x")){var t={name:e.name,symbol:e.symbol,decimals:e.decimals,balance:0,displayBalance:Object(v.a)(0).div(Object(v.a)(10).pow(parseInt(e.decimals))).toString(10),contractAddress:e.id};U.push(t),j.includes(t.contractAddress.toLowerCase())||H.push(t.contractAddress.toLowerCase())}})):L?(K=M).forEach((function(e){var t={name:e.name,symbol:e.symbol,decimals:e.decimals,balance:0,displayBalance:Object(v.a)(0).div(Object(v.a)(10).pow(parseInt(e.decimals))).toString(10),contractAddress:e.token_address};U.push(t),j.includes(t.contractAddress.toLowerCase())||H.push(t.contractAddress.toLowerCase())})):M.tokens.forEach((function(e){var t=e.tokenInfo,r="0";t.decimals&&(r=t.decimals);var n={name:t.name,symbol:t.symbol,decimals:r,balance:e.balance,displayBalance:Object(v.a)(e.balance).div(Object(v.a)(10).pow(parseInt(r))).toString(10),contractAddress:t.address};U.push(n),j.includes(n.contractAddress.toLowerCase())||H.push(n.contractAddress.toLowerCase())})),U.sort((function(a,b){return H.indexOf(a.contractAddress)-H.indexOf(b.contractAddress)})),Q=[],U.forEach((function(e){null==e.name&&(e.name="Token"),null==e.symbol&&(e.symbol="Token"),Q.push(e)})),c("SAVE_TOKENS",Q),c("SET_FETCHING",!1),e.next=44;break;case 43:throw Error("Fetch tokens failed");case 44:e.next=47;break;case 46:throw Error("Fetch tokens failed");case 47:e.next=53;break;case 49:e.prev=49,e.t0=e.catch(6),l++,o("fetchTokenList",{oracleIndex:l});case 53:e.next=57;break;case 55:return e.next=57,o("setDefaultTokenList");case 57:case"end":return e.stop()}}),e,null,[[6,49]])}))),function(e,t){return Y.apply(this,arguments)}),setDefaultTokenList:(Q=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,n,c,o,m,d,l,f,h,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.rootState,n=t.commit,t.dispatch,c=t.rootGetters,t.state,(o=c["metamask/networkConfig"]).smartContractPollTime,o.gasPrice,o.tokenOracleUrls,m=o.currencyName,d=o.networkName,o.specialTokenList,(l=r.metamask).netId,l.isFetching,l.ethAccount,l.tokens,f=l.balance,h=l.ethCoinName,r.common.language,(w=[]).push({symbol:m,name:d+h,balance:Object(v.a)(f).times(Object(v.a)(10).pow(18)).toString(10),displayBalance:f,contractAddress:"0x0000000000000000000000000000000000000000",decimals:"18",isETH:!0}),n("SAVE_TOKENS",w),n("SET_FETCHING",!1);case 8:case"end":return e.stop()}}),e)}))),function(e){return Q.apply(this,arguments)}),fetchGasPrice:(J=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,c,o,m,d,l,f,h,w,O,k,N,E,_,y,A,S,T,I,R,C,F,L,G,B,D,W,M,U;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.rootState,c=t.commit,o=t.dispatch,m=t.rootGetters,d=t.state,l=r.oracleIndex,f=void 0===l?0:l,h=m["metamask/networkConfig"],w=h.smartContractPollTime,O=h.gasPrice,k=h.gasOracleUrls,N=h.useRPCGasPrice,E=h.supportEIP1559,n.metamask.netId,!d.gasPriceOracleLocked){e.next=8;break}return console.info("GasPrice Oracle locked"),setTimeout((function(){return o("fetchGasPrice",{})}),1e3*w),e.abrupt("return");case 8:if(e.prev=8,!k||!k.length){e.next=45;break}return _=k[f%k.length],y=_.indexOf("etherchain")>-1,A=_.indexOf("codefi.network")>-1,S=_.indexOf("owlracle.info")>-1,T=_.indexOf("etherchain.org/api/gasnow")>-1,I=_.indexOf("debank")>-1,R=_.indexOf("polygon.technology")>-1,e.next=19,Object(x.a)(_);case 19:if(200!==(C=e.sent).status){e.next=41;break}return e.next=23,C.json();case 23:if((F=e.sent).hasOwnProperty("data")&&(F=F.data),L=P({},O),F.slow&&(L.slow=Number(F.slow),Number(F.slow)>Number(Object(j.toWei)("0.001","gwei"))&&(L.slow=Math.ceil(Number(Object(j.fromWei)(Number(F.slow).toString(),"gwei"))))),F.safeLow&&(L.slow=Number(F.safeLow)),F.fast&&(L.fast=Number(F.fast),Number(F.fast)>Number(Object(j.toWei)("0.001","gwei"))&&(L.fast=Math.ceil(Number(Object(j.fromWei)(Number(F.fast).toString(),"gwei"))))),F.standard&&(L.standard=Number(F.standard),Number(F.standard)>Number(Object(j.toWei)("0.001","gwei"))&&(L.standard=Math.ceil(Number(Object(j.fromWei)(Number(F.standard).toString(),"gwei"))))),F.instant&&(L.instant=Number(F.instant)),F.fastest&&(L.instant=Number(F.fastest)),F.rapid&&(L.instant=Number(F.rapid),Number(F.rapid)>Number(Object(j.toWei)("0.001","gwei"))&&(L.instant=Math.ceil(Number(Object(j.fromWei)(Number(F.rapid).toString(),"gwei"))))),E){G=1,B=1,D=2,W=10,M=Number(L.standard);try{y&&!T?(M=Number(F.currentBaseFee),M=Object(v.a)(M).times(Object(v.a)(1.125)).toFixed(2),!isNaN(M)&&M>0&&(G=L.slow,B=L.standard,D=L.fast,W=L.instant)):A?(M=Number(F.estimatedBaseFee),M=Object(v.a)(M).times(Object(v.a)(1.125)).toFixed(2),!isNaN(M)&&M>0&&(G=F.low.suggestedMaxPriorityFeePerGas,B=F.medium.suggestedMaxPriorityFeePerGas,D=F.high.suggestedMaxPriorityFeePerGas,W=Object(v.a)(D).plus(Object(v.a)(2)).toNumber())):R?(M=Number(F.estimatedBaseFee),M=Object(v.a)(M).times(Object(v.a)(1.125)).toFixed(2),!isNaN(M)&&M>0&&(G=F.safeLow.maxPriorityFee,B=F.standard.maxPriorityFee,D=F.fast.maxPriorityFee,Object(v.a)(B).gte(Object(v.a)(B))&&(D=Object(v.a)(B).plus(Object(v.a)(1)).toNumber()),W=Object(v.a)(D).plus(Object(v.a)(2)).toNumber())):S?(U=F.speeds)&&U.length>0&&(U.sort((function(a,b){return a.acceptance-b.acceptance})),M=Number(U[0].baseFee),M=Object(v.a)(M).times(Object(v.a)(1.125)).toFixed(2),G=U[0].maxPriorityFeePerGas,B=U[1].maxPriorityFeePerGas,D=U[2].maxPriorityFeePerGas,Object(v.a)(B).gte(Object(v.a)(B))&&(D=Object(v.a)(B).plus(Object(v.a)(1)).toNumber()),W=Object(v.a)(D).plus(Object(v.a)(2)).toNumber()):(M=Number(L.fast),M=Object(v.a)(M).times(Object(v.a)(1.125)).toFixed(2))}catch(e){}L.slow=Object(v.a)(M).plus(Object(v.a)(G)).toNumber(),L.standard=Object(v.a)(M).plus(Object(v.a)(B)).toNumber(),L.fast=Object(v.a)(M).plus(Object(v.a)(D)).toNumber(),L.instant=Object(v.a)(M).plus(Object(v.a)(W)).toNumber(),c("SET_NETWORK_BASEFEE",M)}L.fast<=L.standard&&(L.fast=Object(v.a)(L.standard).plus(Object(v.a)(2)).toNumber()),L.instant<=L.fast&&(L.instant=Object(v.a)(L.fast).plus(Object(v.a)(4)).toNumber()),I&&(L.slow=Object(v.a)(F.slow.price).div(Object(v.a)(1e9)).toNumber(),L.standard=Object(v.a)(F.normal.price).div(Object(v.a)(1e9)).toNumber(),L.fast=Object(v.a)(F.fast.price).div(Object(v.a)(1e9)).toNumber(),L.instant=Object(v.a)(L.fast).plus(Object(v.a)(7)).toNumber()),c("SAVE_GAS_PRICE",L),e.next=42;break;case 41:throw Error("Fetch gasPrice failed");case 42:setTimeout((function(){return o("fetchGasPrice",{})}),1e3*w),e.next=51;break;case 45:if(null==N||!N){e.next=50;break}return e.next=48,o("fetchGasInfoFromOnChain");case 48:e.next=51;break;case 50:c("SAVE_GAS_PRICE",O);case 51:e.next=57;break;case 53:e.prev=53,e.t0=e.catch(8),f++,setTimeout((function(){return o("fetchGasPrice",{oracleIndex:f})}),1e3*w);case 57:case"end":return e.stop()}}),e,null,[[8,53]])}))),function(e,t){return J.apply(this,arguments)}),fetchGasPriceForOnce:(K=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,c,o,m,d,l,f,h,w,O,k,N,E,_,y,A,S,T,I,R,C,F,L,G,B,D,W;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.rootState,c=t.commit,o=t.dispatch,m=t.rootGetters,t.state,d=r.oracleIndex,l=void 0===d?0:d,(f=m["metamask/networkConfig"]).smartContractPollTime,h=f.gasPrice,w=f.gasOracleUrls,O=f.useRPCGasPrice,k=f.supportEIP1559,n.metamask.netId,e.prev=4,!w||!w.length){e.next=47;break}return N=w[l%w.length],E=N.indexOf("etherchain")>-1,_=N.indexOf("codefi.network")>-1,y=N.indexOf("owlracle.info")>-1,A=N.indexOf("etherchain.org/api/gasnow")>-1,S=N.indexOf("debank")>-1,T=N.indexOf("polygon.technology")>-1,e.next=15,Object(x.a)(N);case 15:if(200!==(I=e.sent).status){e.next=37;break}return e.next=19,I.json();case 19:if((R=e.sent).hasOwnProperty("data")&&(R=R.data),C=P({},h),R.slow&&(C.slow=Number(R.slow),Number(R.slow)>Number(Object(j.toWei)("0.001","gwei"))&&(C.slow=Math.ceil(Number(Object(j.fromWei)(Number(R.slow).toString(),"gwei"))))),R.safeLow&&(C.slow=Number(R.safeLow)),R.fast&&(C.fast=Number(R.fast),Number(R.fast)>Number(Object(j.toWei)("0.001","gwei"))&&(C.fast=Math.ceil(Number(Object(j.fromWei)(Number(R.fast).toString(),"gwei"))))),R.standard&&(C.standard=Number(R.standard),Number(R.standard)>Number(Object(j.toWei)("0.001","gwei"))&&(C.standard=Math.ceil(Number(Object(j.fromWei)(Number(R.standard).toString(),"gwei"))))),R.instant&&(C.instant=Number(R.instant)),R.fastest&&(C.instant=Number(R.fastest)),R.rapid&&(C.instant=Number(R.rapid),Number(R.rapid)>Number(Object(j.toWei)("0.001","gwei"))&&(C.instant=Math.ceil(Number(Object(j.fromWei)(Number(R.rapid).toString(),"gwei"))))),k){F=1,L=1,G=2,B=10,D=Number(C.standard);try{E&&!A?(D=Number(R.currentBaseFee),D=Object(v.a)(D).times(Object(v.a)(1.125)).toFixed(2),!isNaN(D)&&D>0&&(F=C.slow,L=C.standard,G=C.fast,B=C.instant)):_?(D=Number(R.estimatedBaseFee),D=Object(v.a)(D).times(Object(v.a)(1.125)).toFixed(2),!isNaN(D)&&D>0&&(F=R.low.suggestedMaxPriorityFeePerGas,L=R.medium.suggestedMaxPriorityFeePerGas,G=R.high.suggestedMaxPriorityFeePerGas,B=Object(v.a)(G).plus(Object(v.a)(2)).toNumber())):T?(D=Number(R.estimatedBaseFee),D=Object(v.a)(D).times(Object(v.a)(1.125)).toFixed(2),!isNaN(D)&&D>0&&(F=R.safeLow.maxPriorityFee,L=R.standard.maxPriorityFee,G=R.fast.maxPriorityFee,Object(v.a)(L).gte(Object(v.a)(L))&&(G=Object(v.a)(L).plus(Object(v.a)(1)).toNumber()),B=Object(v.a)(G).plus(Object(v.a)(2)).toNumber())):y?(W=R.speeds)&&W.length>0&&(W.sort((function(a,b){return a.acceptance-b.acceptance})),D=Number(W[0].baseFee),D=Object(v.a)(D).times(Object(v.a)(1.125)).toFixed(2),F=W[0].maxPriorityFeePerGas,L=W[1].maxPriorityFeePerGas,G=W[2].maxPriorityFeePerGas,Object(v.a)(L).gte(Object(v.a)(L))&&(G=Object(v.a)(L).plus(Object(v.a)(1)).toNumber()),B=Object(v.a)(G).plus(Object(v.a)(2)).toNumber()):(D=Number(C.fast),D=Object(v.a)(D).times(Object(v.a)(1.125)).toFixed(2))}catch(e){}C.slow=Object(v.a)(D).plus(Object(v.a)(F)).toNumber(),C.standard=Object(v.a)(D).plus(Object(v.a)(L)).toNumber(),C.fast=Object(v.a)(D).plus(Object(v.a)(G)).toNumber(),C.instant=Object(v.a)(D).plus(Object(v.a)(B)).toNumber(),c("SET_NETWORK_BASEFEE",D)}C.fast<=C.standard&&(C.fast=Object(v.a)(C.standard).plus(Object(v.a)(2)).toNumber()),C.instant<=C.fast&&(C.instant=Object(v.a)(C.fast).plus(Object(v.a)(4)).toNumber()),S&&(C.slow=Object(v.a)(R.slow.price).div(Object(v.a)(1e9)).toNumber(),C.standard=Object(v.a)(R.normal.price).div(Object(v.a)(1e9)).toNumber(),C.fast=Object(v.a)(R.fast.price).div(Object(v.a)(1e9)).toNumber(),C.instant=Object(v.a)(C.fast).plus(Object(v.a)(7)).toNumber()),c("SAVE_GAS_PRICE",C),e.next=45;break;case 37:if(!(++l>=w.length-1)){e.next=43;break}return e.next=41,o("fetchGasInfoFromOnChain");case 41:e.next=45;break;case 43:return e.next=45,o("fetchGasPriceForOnce",{oracleIndex:l});case 45:e.next=53;break;case 47:if(null==O||!O){e.next=52;break}return e.next=50,o("fetchGasInfoFromOnChain");case 50:e.next=53;break;case 52:c("SAVE_GAS_PRICE",h);case 53:return e.abrupt("return",!0);case 56:return e.prev=56,e.t0=e.catch(4),e.abrupt("return",!1);case 59:case"end":return e.stop()}}),e,null,[[4,56]])}))),function(e,t){return K.apply(this,arguments)}),fetchGasInfoFromOnChain:(V=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state,t.getters,r=t.rootGetters,t.rootState,n=t.dispatch,t.commit,!r["metamask/networkConfig"].supportEIP1559){e.next=7;break}return e.next=5,n("buildChainGasPriceFromRpcForEIP1559");case 5:e.next=9;break;case 7:return e.next=9,n("buildChainGasPriceFromRpc");case 9:case"end":return e.stop()}}),e)}))),function(e){return V.apply(this,arguments)}),updateGasPrice:(H=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,n,c,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.state,t.getters,t.rootGetters,t.rootState,t.dispatch,n=t.commit,c=r.gasPrices,(o=Object.assign({},c)).fast=40,n("SAVE_GAS_PRICE",o);case 5:case"end":return e.stop()}}),e)}))),function(e){return H.apply(this,arguments)}),buildChainGasPriceFromRpc:(U=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,n,c,o,m,d,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,t.getters,n=t.rootGetters,t.rootState,c=t.dispatch,o=t.commit,m=n["metamask/networkConfig"].gasPrice,e.prev=2,e.next=5,c("fetchGasPriceFromChain");case 5:d=e.sent,l=Object(j.hexToNumberString)(d),Math.ceil(Number(Object(j.fromWei)(l,"gwei"))),f=P({},l),30==r.netId||50==r.netId?(f.slow=Number(Object(j.fromWei)(l,"gwei")),f.standard=Object(v.a)(f.slow).toNumber(),f.fast=Object(v.a)(f.standard).plus(Object(v.a)(.01)).toNumber(),f.instant=Object(v.a)(f.fast).plus(Object(v.a)(.02)).toNumber()):421611==r.netId||42161==r.netId?(f.slow=Number(Object(j.fromWei)(l,"gwei")),f.standard=Object(v.a)(f.slow).toNumber(),f.fast=Object(v.a)(f.standard).plus(Object(v.a)(.1)).toNumber(),f.instant=Object(v.a)(f.fast).plus(Object(v.a)(1)).toNumber()):56==r.netId||97==r.netId?(f.slow=Number(Object(j.fromWei)(l,"gwei")),f.standard=Object(v.a)(f.slow).toNumber(),f.fast=Object(v.a)(f.standard).plus(Object(v.a)(1)).toNumber(),f.instant=Object(v.a)(f.fast).plus(Object(v.a)(5)).toNumber()):42220==r.netId||1285==r.netId?(f.slow=Number(Object(j.fromWei)(l,"gwei")),f.standard=Object(v.a)(f.slow).toNumber(),f.fast=Object(v.a)(f.standard).plus(Object(v.a)(.1)).toNumber(),f.instant=Object(v.a)(f.fast).plus(Object(v.a)(.5)).toNumber()):8217==r.netId?(f.slow=Number(Object(j.fromWei)(l,"gwei")),f.standard=Object(v.a)(f.slow).toNumber(),f.fast=Object(v.a)(f.standard).plus(Object(v.a)(0)).toNumber(),f.instant=Object(v.a)(f.fast).plus(Object(v.a)(0)).toNumber()):1088==r.netId?(f.slow=Number(Object(j.fromWei)(l,"gwei")),f.standard=Object(v.a)(f.slow).toNumber(),f.fast=Object(v.a)(f.standard).plus(Object(v.a)(.5)).toNumber(),f.instant=Object(v.a)(f.fast).plus(Object(v.a)(2)).toNumber()):1313161554==r.netId?(f.slow=Number(Object(j.fromWei)(l,"gwei")),f.standard=Object(v.a)(f.slow).toNumber(),f.fast=Object(v.a)(f.standard).plus(Object(v.a)(.01)).toNumber(),f.instant=Object(v.a)(f.fast).plus(Object(v.a)(.03)).toNumber()):88==r.netId?(f.slow=Number(Object(j.fromWei)(l,"gwei")),f.standard=Object(v.a)(f.slow).toNumber(),f.fast=Object(v.a)(f.standard).plus(Object(v.a)(.01)).toNumber(),f.instant=Object(v.a)(f.fast).plus(Object(v.a)(.05)).toNumber()):69==r.netId||10==r.netId?(f.slow=Number(Object(j.fromWei)(l,"gwei")),f.standard=Object(v.a)(f.slow).toNumber(),f.fast=Object(v.a)(f.standard).plus(Object(v.a)(.001)).toNumber(),f.instant=Object(v.a)(f.fast).plus(Object(v.a)(.005)).toNumber()):314==r.netId?(f.slow=Number(Object(j.fromWei)(l,"gwei")),f.standard=Object(v.a)(f.slow).toNumber(),f.fast=Object(v.a)(f.standard).plus(Object(v.a)(.1)).toNumber(),f.instant=Object(v.a)(f.fast).plus(Object(v.a)(.5)).toNumber()):7341==r.netId?(f.slow=Number(Object(j.fromWei)(l,"gwei")),f.standard=Object(v.a)(f.slow).toNumber(),f.fast=Object(v.a)(f.standard).plus(Object(v.a)(1e-6)).toNumber(),f.instant=Object(v.a)(f.fast).plus(Object(v.a)(5e-6)).toNumber()):(f.slow=Number(Object(j.fromWei)(l,"gwei")),f.standard=f.slow,f.fast=Object(v.a)(f.standard).plus(Object(v.a)(1)).toNumber(),f.instant=Object(v.a)(f.fast).plus(Object(v.a)(5)).toNumber()),o("SAVE_GAS_PRICE",f),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.info(e.t0),o("SAVE_GAS_PRICE",m);case 17:case"end":return e.stop()}}),e,null,[[2,13]])}))),function(e){return U.apply(this,arguments)}),buildChainGasPriceFromRpcForEIP1559:(M=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,n,c,o,m,d,l,f,h,w,O,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,t.getters,n=t.rootGetters,t.rootState,c=t.dispatch,o=t.commit,m=n["metamask/networkConfig"].gasPrice,e.prev=2,e.next=5,c("fetchBaseFeeFromChain");case 5:return d=e.sent,l=Object(v.a)(Object(j.fromWei)(Object(j.hexToNumberString)(d.baseFeePerGas),"gwei")).times(Object(v.a)(1.25)).toFixed(9),f=P({},m),o("SET_NETWORK_BASEFEE",l),e.next=11,c("fetchPriorityFeePerGasFromChain");case 11:return h=e.sent,e.next=14,c("formatFeeHistory",{result:h,includePending:!1});case 14:return w=e.sent,e.next=17,c("avg",{arr:w.map((function(b){return b.priorityFeePerGas[1]}))});case 17:O=e.sent,k=Object(v.a)(l).plus(Object(v.a)(Object(j.fromWei)(Object(v.a)(O).toString(10),"gwei")).toFixed(9)).toNumber(),f.slow=Object(v.a)(k).plus(Object(v.a)(.1)).toNumber(),f.standard=Object(v.a)(k).plus(Object(v.a)(.1)).toNumber(),f.fast=Object(v.a)(k).plus(Object(v.a)(1)).toNumber(),f.instant=Object(v.a)(k).plus(Object(v.a)(2)).toNumber(),o("SAVE_GAS_PRICE",f),e.next=31;break;case 26:e.prev=26,e.t0=e.catch(2),console.info(e.t0),o("SET_NETWORK_BASEFEE",r.baseFee),o("SAVE_GAS_PRICE",m);case 31:case"end":return e.stop()}}),e,null,[[2,26]])}))),function(e){return M.apply(this,arguments)}),fetchGasPriceFromChain:(W=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,t.getters,t.rootGetters,t.rootState,n=t.dispatch,t.commit,e.abrupt("return",new Promise((function(e,t){var c=function(){var m=Object(o.a)(regeneratorRuntime.mark((function o(m){var d,l,f,h;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return d=m.retryAttempt,l=void 0===d?1:d,l++,o.prev=2,f={from:r.ethAccount,method:"eth_gasPrice",params:[]},o.next=6,n("metamask/sendAsync",f,{root:!0});case 6:h=o.sent,e(h),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(2),l>=2?t(o.t0):c({retryAttempt:l});case 13:case"end":return o.stop()}}),o,null,[[2,10]])})));return function(e){return m.apply(this,arguments)}}();c({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return W.apply(this,arguments)}),formatFeeHistory:(D=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,c,o,m,d,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.state,t.getters,t.rootGetters,t.rootState,t.dispatch,t.commit,n=r.result,c=r.includePending,o=Object(j.hexToNumber)(n.oldestBlock),m=0,d=[],l=function(){var e=[];n.reward[m].forEach((function(t,i){e.push(Number(t))})),d.push({number:o,baseFeePerGas:Number(n.baseFeePerGas[m]),gasUsedRatio:Number(n.gasUsedRatio[m]),priorityFeePerGas:e}),o+=1,m+=1};m<20;)l();return c&&d.push({number:"pending",baseFeePerGas:Number(n.baseFeePerGas[20]),gasUsedRatio:NaN,priorityFeePerGas:[]}),e.abrupt("return",d);case 10:case"end":return e.stop()}}),e)}))),function(e,t){return D.apply(this,arguments)}),avg:(B=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,t.dispatch,t.commit,n=r.arr,c=n.reduce((function(a,e){return a+e})),console.info(n),e.abrupt("return",Math.round(c/n.length));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return B.apply(this,arguments)}),fetchPriorityFeePerGasFromChain:(G=Object(o.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,r=t.dispatch,t.commit,e.abrupt("return",new Promise((function(e,t){var n=function(){var c=Object(o.a)(regeneratorRuntime.mark((function c(o){var m,d,l,f;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return m=o.retryAttempt,d=void 0===m?1:m,d++,c.prev=2,l={method:"eth_feeHistory",params:[20,"latest",[25,50,75]]},c.next=6,r("metamask/sendAsync",l,{root:!0});case 6:f=c.sent,e(f),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(2),d>=2?t(c.t0):n({retryAttempt:d});case 13:case"end":return c.stop()}}),c,null,[[2,10]])})));return function(e){return c.apply(this,arguments)}}();n({})})));case 4:case"end":return e.stop()}}),e)}))),function(e){return G.apply(this,arguments)}),fetchBaseFeeFromChain:(L=Object(o.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,r=t.dispatch,t.commit,e.abrupt("return",new Promise((function(e,t){var n=function(){var c=Object(o.a)(regeneratorRuntime.mark((function c(o){var m,d,l,f;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return m=o.retryAttempt,d=void 0===m?1:m,d++,c.prev=2,l={method:"eth_getBlockByNumber",params:["latest",!1]},c.next=6,r("metamask/sendAsync",l,{root:!0});case 6:f=c.sent,e(f),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(2),d>=2?t(c.t0):n({retryAttempt:d});case 13:case"end":return c.stop()}}),c,null,[[2,10]])})));return function(e){return c.apply(this,arguments)}}();n({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return L.apply(this,arguments)}),fetchCoinPrice:(F=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,n,c,m,d,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.rootState,n=t.commit,c=t.dispatch,m=t.rootGetters,t.state,(d=m["metamask/networkConfig"]).smartContractPollTime,l=d.extraFeeOracle,f=d.supportExtraFee,r.metamask.netId,f){e.next=6;break}return n("SET_ETH_PRICE_LOADED",!0),e.abrupt("return");case 6:return e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(o.a)(regeneratorRuntime.mark((function o(m){var d,f,h,w,O,j,k;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return d=m.retryAttempt,f=void 0===d?1:d,f++,o.prev=2,o.next=5,Object(x.a)(l.coinPriceUrl,{timeout:4e3});case 5:if(200!==(h=o.sent).status){o.next=17;break}return o.next=9,h.json();case 9:w=o.sent,O=0,w.hasOwnProperty(l.coinId)&&(O=w[l.coinId].usd),n("SAVE_ETH_PRICE",O),n("SET_ETH_PRICE_LOADED",!0),e(O),o.next=18;break;case 17:throw Error("Fetch coin price failed");case 18:o.next=35;break;case 20:if(o.prev=20,o.t0=o.catch(2),!(f>=2)){o.next=34;break}if(!(j=l.coinBackups)||!j.length){o.next=31;break}return o.next=27,c("fetchCoinPriceFromBackups");case 27:k=o.sent,e(k),o.next=32;break;case 31:t(o.t0);case 32:o.next=35;break;case 34:r({retryAttempt:f});case 35:case"end":return o.stop()}}),o,null,[[2,20]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 8:case"end":return e.stop()}}),e)}))),function(e){return F.apply(this,arguments)}),fetchCoinPriceFromBackups:(C=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,n,c,m,d,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.rootState,n=t.commit,t.dispatch,c=t.rootGetters,t.state,(m=c["metamask/networkConfig"]).smartContractPollTime,d=m.extraFeeOracle,l=m.supportExtraFee,r.metamask.netId,l){e.next=6;break}return n("SET_ETH_PRICE_LOADED",!0),e.abrupt("return");case 6:return e.abrupt("return",new Promise((function(e,t){var r=function(){var c=Object(o.a)(regeneratorRuntime.mark((function c(o){var m,l,f,h,w,O,j;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(m=o.retryAttempt,l=void 0===m?1:m,l++,c.prev=2,!(f=d.coinBackups)){c.next=20;break}return h=f[l%f.length],c.next=8,Object(x.a)(h);case 8:if(200!==(w=c.sent).status){c.next=19;break}return c.next=12,w.json();case 12:O=c.sent,j=O.data.priceUsd,n("SAVE_ETH_PRICE",j),n("SET_ETH_PRICE_LOADED",!0),e(j),c.next=20;break;case 19:throw Error("Fetch coin price failed");case 20:c.next=26;break;case 22:c.prev=22,c.t0=c.catch(2),console.info(c.t0),l>=3?t(c.t0):r({retryAttempt:l});case 26:case"end":return c.stop()}}),c,null,[[2,22]])})));return function(e){return c.apply(this,arguments)}}();r({})})));case 8:case"end":return e.stop()}}),e)}))),function(e){return C.apply(this,arguments)})},Object(c.a)(n,"updateGasPrice",(R=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,n,c,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.state,t.getters,t.rootGetters,t.rootState,t.dispatch,n=t.commit,c=r.gasPrices,(o=Object.assign({},c)).fast=40,n("SAVE_GAS_PRICE",o);case 5:case"end":return e.stop()}}),e)}))),function(e){return R.apply(this,arguments)})),Object(c.a)(n,"lockGasPriceOracle",(I=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,t.rootGetters,t.rootState,t.dispatch,n=t.commit,c=r.gasPriceOracleLocked,n("SET_GAS_PRICE_ORACLE_LOCKED",c);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return I.apply(this,arguments)})),Object(c.a)(n,"getTransactionReceipt",(T=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,t.rootGetters,t.rootState,c=t.dispatch,t.commit,m=r.txHash,e.abrupt("return",new Promise((function(e,t){var r=function(){var d=Object(o.a)(regeneratorRuntime.mark((function o(d){var l,f,h,w;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return l=d.retryAttempt,f=void 0===l?1:l,f++,o.prev=2,h={from:n.ethAccount,method:"eth_getTransactionReceipt",params:[m]},o.next=6,c("metamask/sendAsync",h,{root:!0});case 6:w=o.sent,e(w),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(2),f>=2?t(o.t0):r({retryAttempt:f});case 13:case"end":return o.stop()}}),o,null,[[2,10]])})));return function(e){return d.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return T.apply(this,arguments)})),Object(c.a)(n,"getTransactionByHash",(S=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,t.rootGetters,t.rootState,c=t.dispatch,t.commit,m=r.txHash,e.abrupt("return",new Promise((function(e,t){var r=function(){var d=Object(o.a)(regeneratorRuntime.mark((function o(d){var l,f,h,w;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return l=d.retryAttempt,f=void 0===l?1:l,f++,o.prev=2,h={from:n.ethAccount,method:"eth_getTransactionByHash",params:[m]},o.next=6,c("metamask/sendAsync",h,{root:!0});case 6:w=o.sent,e(w),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(2),f>=2?t(o.t0):r({retryAttempt:f});case 13:case"end":return o.stop()}}),o,null,[[2,10]])})));return function(e){return d.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return S.apply(this,arguments)})),Object(c.a)(n,"getTransactionCount",(A=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,c,address;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,t.rootGetters,t.rootState,c=t.dispatch,t.commit,address=r.address,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(o.a)(regeneratorRuntime.mark((function o(m){var d,l,f,h;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return d=m.retryAttempt,l=void 0===d?1:d,l++,o.prev=2,f={from:n.ethAccount,method:"eth_getTransactionCount",params:[address,"latest"]},o.next=6,c("metamask/sendAsync",f,{root:!0});case 6:h=o.sent,e(h),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(2),l>=2?t(o.t0):r({retryAttempt:l});case 13:case"end":return o.stop()}}),o,null,[[2,10]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return A.apply(this,arguments)})),Object(c.a)(n,"bulkQueryENS",(y=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,c,m,d,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.rootState,t.commit,c=t.dispatch,m=t.getters,t.rootGetters,t.state,d=r.names,l=m.networkConfig.rpcCallRetryAttempt,f=["https://mainnet-eth.compound.finance","https://rpc.ankr.com/eth","https://eth.public-rpc.com","https://mainnet.infura.io/v3/bcf5eb7bbef849ad9656d4d78b1f4f65","https://cloudflare-eth.com"],e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(o.a)(regeneratorRuntime.mark((function o(m){var h,w,O,k,v,x,N,E;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return h=m.retryAttempt,O=f[(w=void 0===h?0:h)%f.length],w++,o.prev=3,k=n.metamask.ethAccount,v=[],d.forEach((function(e,i){try{e=ee.hash(e)}catch(t){e=ee.hash("hachi8891bdc901b.eth")}var t="0x3b3b57de"+Object(j.padLeft)(e,64).replace("0x","");v.push({method:"eth_call",params:[{from:k,to:"0x4976fb03c32e5b8cfe2b6ccb31c09ba78ebaba41",data:t},"latest"]})})),(x={params:v}).rpcUrl=O,o.next=11,c("metamask/sendJSONRPCRequest",x,{root:!0});case 11:N=o.sent,E={},N.forEach((function(e,i){var t=d[i];try{E[t]=$.decodeParameter("address",e)}catch(e){E[t]="0x0000000000000000000000000000000000000000"}})),e(E),o.next=21;break;case 17:o.prev=17,o.t0=o.catch(3),console.info(o.t0),w>=l?t(o.t0):r({retryAttempt:w});case 21:case"end":return o.stop()}}),o,null,[[3,17]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return y.apply(this,arguments)})),Object(c.a)(n,"sendRawTransaction",(_=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.rootState,t.commit,n=t.dispatch,c=t.getters,t.rootGetters,t.state,m=r.signedData,e.abrupt("return",new Promise((function(e,t){var r=function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(o){var d,l,f,h,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d=o.retryAttempt,l=void 0===d?0:d,l++,t.prev=2,f={params:{method:"eth_sendRawTransaction",params:[m]}},h=c.networkConfig.rpcUrl,f.rpcUrl=h,t.next=9,n("metamask/sendJSONRPCRequest",f,{root:!0});case 9:w=t.sent,e(w),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),console.info(t.t0),l>=3?e(-1):r({retryAttempt:l});case 17:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e){return t.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return _.apply(this,arguments)})),Object(c.a)(n,"sendAsync",(function(e,t){var r=e.rootState,n=(e.commit,e.dispatch),c=e.getters,m=(e.rootGetters,e.state),d=t.method,l=t.from,f=t.params;switch(c.netId){case 77:case 99:break;case 100:l=void 0}var h=r.common.isMobile;return new Promise(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var o,w,O,j,k,v,x,N,E,P,_,y,A;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.getEthereumProvider();case 2:o=e.sent,!1;try{"kaikas"!=m.providerName||"eth_sendTransaction"!=d&&"eth_signTypedData_v3"!=d||(d=(d=d.replace("eth_","klay_")).replace("TypedData_v3",""))}catch(e){}if("walletConnect"!=m.providerName){e.next=79;break}return e.prev=6,e.next=9,o.getWalletConnector();case 9:return w=e.sent,e.next=12,c.web3();case 12:if(e.sent,"eth_sendTransaction"!=d){e.next=44;break}if(O=f[0],j=!0,!m.signAndSend){e.next=37;break}return j=!1,e.prev=18,e.next=21,w.signTransaction(O);case 21:return(k=e.sent).startsWith("0x")||(k="0x"+k),e.next=25,n("sendRawTransaction",{signedData:k});case 25:if(v=e.sent,console.info(v),-1!=v){e.next=31;break}throw Error("Send transaction failed, try it again");case 31:t(v);case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(18),j=!0;case 37:if(!j){e.next=43;break}return e.next=40,w.sendTransaction(O);case 40:x=e.sent,console.info(x),t(x);case 43:return e.abrupt("return");case 44:if("eth_signTransaction"!=d){e.next=49;break}return e.next=47,w.signTransaction(txParam);case 47:N=e.sent,t(N);case 49:if("eth_signTypedData_v3"!=d){e.next=58;break}return f=[f[0],f[1]],e.next=53,w.signTypedData(f);case 53:E=e.sent,console.info(E),t(E),e.next=62;break;case 58:return e.next=60,o.send({id:1314,method:d,params:f,jsonrpc:"2.0",from:l});case 60:(P=e.sent)?t(P):r("get result by walletConnect failed");case 62:e.next=77;break;case 64:return e.prev=64,e.t1=e.catch(6),console.info(e.t1,d),e.prev=67,e.next=70,o.send({id:1314,method:d,params:f,jsonrpc:"2.0"});case 70:(_=e.sent)?t(_):r("Send RPC by walletConnect failed"),e.next=77;break;case 74:e.prev=74,e.t2=e.catch(67),r("Send RPC by walletConnect failed");case 77:e.next=80;break;case 79:try{"walletLink"==m.providerName&&"eth_signTypedData_v3"==d&&(f=[f[0],JSON.parse(f[1])]),y={id:520,method:d,params:f,jsonrpc:"2.0",from:l},h&&delete y.from,o.request(y).then((function(e){t(e)})).catch((function(e){r(e)}))}catch(e){A={id:520,method:d,params:f,jsonrpc:"2.0",from:l},h&&delete A.from;try{o.send(A,(function(e,n){e&&r(e),n||((n={}).result=null),n.error?r(n.error):t(n.result)}))}catch(e){o.sendAsync(A,(function(e,n){e&&r(e),n||((n={}).result=null),n.error?r(n.error):t(n.result)}))}}case 80:case"end":return e.stop()}}),e,null,[[6,64],[18,34],[67,74]])})));return function(t,r){return e.apply(this,arguments)}}())})),Object(c.a)(n,"sendJSONRPCRequest",(function(e,t){e.state,e.getters,e.rootState;var r=t.params,n=t.rpcUrl;return new Promise(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,c){var o,m,d,l,data,f,h,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=parseInt(Date.parse(new Date)),m=!1,Array.isArray(r)?(m=!0,d=[],l=0,r.forEach((function(param,i){param.hasOwnProperty("id")||(param.id=o+l,l+=1),param.jsonrpc="2.0",d.push(param)})),r=d):(r.hasOwnProperty("id")||(r.id=o),r.jsonrpc="2.0"),data=JSON.stringify(r),e.next=7,Object(x.a)(n,{body:data,headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});case 7:return f=e.sent,e.next=10,f.json();case 10:(h=e.sent).error?c(h.error):m?(w=[],h.forEach((function(e,i){e.error?w.push(e.error):w.push(e.result)})),t(w)):t(h.result),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),c(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r){return e.apply(this,arguments)}}())})),Object(c.a)(n,"sendAsync_custom",(function(e,t){e.state;var r=e.getters,n=t.method,c=t.from,m=t.params;switch(r.netId){case 77:case 99:break;case 100:c=void 0}return new Promise(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,o){var d,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.customRPCWeb3();case 2:return d=e.sent,console.info(d.currentProvider),e.next=6,r.customRPCProvider();case 6:l=e.sent,console.info(l),console.log("sendAsync `method, from, params`",n,c,m),d.currentProvider.send({method:n,params:m,jsonrpc:"2.0"},(function(e,r){console.info(r),console.info(e),e&&o(e),r.error?o(r.error):t(r.result)}));case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())})),n);t.default={namespaced:!0,state:function(){return{ethAccount:null,netId:1,currency:"ETH",domainData:{},balance:"0",initialized:!1,address:{value:null,valid:!1},gasPrice:{fast:10,slow:5,standard:5,instant:20},gasPriceInfoLoaded:!1,gasPriceLoading:!1,gasPriceOracleLocked:!1,providerName:"",networkName:"",tokens:[],tokensForTestnet:[],tokenAddress:"",isFetching:!0,ethCoinName:" Native Currency",walletState:1,isImToken:!1,isTrustWallet:!1,isMetamask:!0,signAndSend:!1,walletName:"",ethPrice:0,ethPriceLoaded:!1,prepareNetId:1,qrModalClosed:!1,networkBaseFee:48,supportEIP1559:!1}},getters:re,mutations:ae,actions:ne}}}]);